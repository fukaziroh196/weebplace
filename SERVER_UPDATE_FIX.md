# Исправление проблемы с обновлением на сервере

## Проблема
На сервере есть локальные незакоммиченные изменения в `server/index.js`, которые блокируют `git pull`.

## Решение

Выполните на сервере одну из следующих команд:

### Вариант 1: Сохранить изменения (stash) и обновить
```bash
cd /var/www/kristal/weebplace
git stash
update-weebplace
git stash pop  # если нужно восстановить изменения
```

### Вариант 2: Откатить локальные изменения (если они не нужны)
```bash
cd /var/www/kristal/weebplace
git checkout -- server/index.js
update-weebplace
```

### Вариант 3: Посмотреть что изменено, потом решить
```bash
cd /var/www/kristal/weebplace
git diff server/index.js
# Посмотреть изменения, потом использовать вариант 1 или 2
```

## После обновления

После успешного обновления на сервере будут применены новые изменения:
- ✅ Индексы базы данных
- ✅ Исправление race condition (таблица quiz_guesses)
- ✅ Валидация входных данных

**Важно:** После обновления нужно перезапустить сервис:
```bash
sudo systemctl restart weebplace
```

